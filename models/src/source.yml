version: 2

sources:
  - name: airbnb
    schema: airbnb
    tables:
      - name: listings
        description: "Contains property listings"
        columns:
          - name: id
            description: "PK"
            tests: 
              - not_null
              - unique
          - name: listing_url
          - name: name
          - name: room_type
          - name: minimun_nights
          - name: host_id
          - name: price
          - name: created_at
          - name: updated_at

      - name: hosts
        description: "Information about property owners"
        columns:
          - name: id
            description: "PK"
            tests: 
              - not_null
              - unique       
          - name: name
          - name: is_superhost
          - name: created_at
          - name: updated_at

      - name: reviews
        description: "Guest reviews for listings"
        columns:
          - name: review_id
            description: "PK"
            tests: 
            - not_null
            - unique          
          - name: listing_id
            tests:
            - relationships:
                to: source('airbnb','listings')
                field: id
          - name: review_date
          - name: reviewer_name
          - name: comments
          - name: sentiment

      - name: dim_date
        description: "Date dimension loaded via dbt seed"
        columns:
          - name: date_id
            tests:
              - not_null
              - unique