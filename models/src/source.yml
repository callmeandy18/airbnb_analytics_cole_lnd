version: 2

sources:
  - name: airbnb
    schema: airbnb
    tables:
      - name: listings
        description: "One row per property listings"
        columns:
          - name: id
            description: "PK"
            tests: 
              - not_null
              - unique
          - name: listing_url
            description: "URL of the listing"
          - name: name
            description: "Listing title"
          - name: room_type
            description: "Type of room offered"
          - name: minimun_nights
            description: "Minimum nights required"
          - name: host_id
            description: "FK to hosts.id"
          - name: price
            description: "Nightly price"
          - name: created_at
            description: "Record creation timestamp"
          - name: updated_at
            description: "Record update timestamp"

      - name: hosts
        description: "Information about property owners"
        columns:
          - name: id
            description: "PK"
            tests: 
              - not_null
              - unique       
          - name: name
            description: "Host display name"
          - name: is_superhost
            description: "Whether the host is a superhost"
          - name: created_at
            description: "Record creation timestamp"
          - name: updated_at
            description: "Record update timestamp"

      - name: reviews
        description: "Guest reviews for listings"
        columns:
          - name: review_id
            description: "PK"
            tests: 
            - not_null
            - unique          
          - name: listing_id
            description: "FK to listings.id"
            tests:
            - relationships:
                to: source('airbnb','listings')
                field: id
          - name: date
            description: "Review date"
          - name: reviewer_name
            description: "Reviewer name"
          - name: comments
            description: "Review comments"
          - name: sentiment
            description: "Sentiment label"

      - name: dim_date
        description: "Date dimension loaded via dbt seed"
        columns:
          - name: date_id
            description: "FK"
            tests:
              - not_null
              - unique